{% extends 'base.html'%}
{% load static %}

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">


<!-- Mirrored from homelengohtml.vercel.app/my-profile.html by  /3.x [XR&CO'2014], Mon, 14 Apr 2025 00:46:11 GMT -->
<!-- Added by  --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by  -->
<head>
    <meta charset="utf-8">
    <title>Homelengo - Real Estate HTML Template</title>
    <meta name="keywords" content="HTML, CSS, JavaScript, Bootstrap">
    <meta name="description" content="Real Estate HTML Template">

    <meta name="author" content="themesflat.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- font -->
   <link rel="stylesheet" href="{% static 'fonts/fonts.css' %}">
    <!-- Icons -->
    <link rel="stylesheet" href="{% static 'fonts/font-icons.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/jqueryui.min.css' %}"/>

   <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}"/>
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'images/logo/favicon.png' %}">
    <link rel="apple-touch-icon-precomposed" href="{% static 'images/logo/favicon.png' %}">

</head>

<body class="body bg-surface">

    <!-- RTL -->
   <a href="javascript:void(0);" id="toggle-rtl" class="tf-btn primary">RTL</a>
   <!-- /RTL  --> 

    <!-- preload -->
    <div class="preload preload-container">
        <div class="preload-logo">
            <div class="spinner"></div>
            <span class="icon icon-villa-fill"></span>
        </div>
    </div>
    <!-- /preload -->

{%block content%}

    <div id="wrapper">
        <div id="page" class="clearfix">
            <div class="layout-wrap">
                <!-- header -->
                <header class="main-header fixed-header header-dashboard">
                    <!-- Header Lower -->
                    <div class="header-lower">
                        <div class="row">                      
                            <div class="col-lg-12">         
                                <div class="inner-header">
                                    <div class="inner-header-left">
                                        <div class="logo-box d-flex">
                                            <div class="logo"><a href="{% url 'home' %}"><img src="{% static 'images/logo/logo%402x.png' %}" alt="logo" width="174" height="44"></a></div>
                                            <div class="button-show-hide">
                                                <span class="icon icon-categories"></span>
                                            </div>
                                        </div>
                                        <div class="nav-outer flex align-center">
                                            <!-- Main Menu -->
                                            <nav class="main-menu show navbar-expand-md">
                                                <div class="navbar-collapse collapse clearfix" id="navbarSupportedContent">
                                                    <ul class="navigation clearfix">
                                                        <li class="current"><a href="{% url 'index' %}">Home</a>
                                                        </li>
                                                        <li class="dropdown2"><a href="#">Listing</a>
                                                            <ul>
                                                               
                                                                <li><a href="property-halfmap-list.html">Property Listing</a></li>
                                                                
    
                                                            </ul>
                                                        </li>
                                                        <li class="dropdown2"><a href="#">Properties</a>
                                                            <ul>
                                                               
                                                                <li><a href="property-details-v4.html">Property Details</a></li>
                                                            </ul>
                                                        </li>
                                                        <li class="dropdown2 current"><a href="#">Dashboard</a>
                                                            <ul>
                                                                <li><a href="dashboard.html">Dashboard</a></li>
                                                                <li><a href="my-property.html">My Properties</a></li>
                                                                <li><a href="message.html">Message</a></li>
                                                                <li><a href="my-favorites.html">My Favorites</a></li>
                                                                <li><a href="reviews.html">Reviews</a></li>
                                                                <li class="current"><a href="my-profile.html">My Profile</a></li>
                                                                <li><a href="add-property.html">Add Property</a></li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </nav>
                                            <!-- Main Menu End-->
                                        </div>
                                    </div>
                                    
                                    
                                    <div class="header-account inner-header-right">
                                        <div class="box-avatar dropdown-toggle" data-bs-toggle="dropdown">
                                            <div class="avatar avt-34 round">
                                                <img id="avatar-small"
     src="{% if request.user.profile.avatar %}{{ request.user.profile.avatar.url }}{% else %}{% static 'images/avatar/default.png' %}{% endif %}" 
     alt="avatar" width="34" height="34">
                                            </div>
                                            <p class="name" id="display-username">
                                                Themesflat
                                                <span class="icon icon-arr-down"></span>
                                            </p>

                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" href="my-favorites.html">My Properties</a>
                                                <a class="dropdown-item" href="message.html">Message</a>
                                                <a class="dropdown-item" href="my-favorites.html">My Favorites</a>
                                                <a class="dropdown-item" href="reviews.html">Reviews</a>
                                                <a class="dropdown-item" href="my-profile.html">My Profile</a>
                                                <a class="dropdown-item" href="add-property.html">Add Property</a>
                                                <a class="dropdown-item" href="#" id="logout-link">Logout</a>
                                            </div>
                                        </div>
                                        <div class="flat-bt-top">
                                            <a class="tf-btn primary" href="add-property.html">
                                                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.625 14.375V17.1875C13.625 17.705 13.205 18.125 12.6875 18.125H4.5625C4.31386 18.125 4.0754 18.0262 3.89959 17.8504C3.72377 17.6746 3.625 17.4361 3.625 17.1875V6.5625C3.625 6.045 4.045 5.625 4.5625 5.625H6.125C6.54381 5.62472 6.96192 5.65928 7.375 5.72834M13.625 14.375H16.4375C16.955 14.375 17.375 13.955 17.375 13.4375V9.375C17.375 5.65834 14.6725 2.57417 11.125 1.97834C10.7119 1.90928 10.2938 1.87472 9.875 1.875H8.3125C7.795 1.875 7.375 2.295 7.375 2.8125V5.72834M13.625 14.375H8.3125C8.06386 14.375 7.8254 14.2762 7.64959 14.1004C7.47377 13.9246 7.375 13.6861 7.375 13.4375V5.72834M17.375 11.25V9.6875C17.375 8.94158 17.0787 8.22621 16.5512 7.69876C16.0238 7.17132 15.3084 6.875 14.5625 6.875H13.3125C13.0639 6.875 12.8254 6.77623 12.6496 6.60041C12.4738 6.4246 12.375 6.18614 12.375 5.9375V4.6875C12.375 4.31816 12.3023 3.95243 12.1609 3.6112C12.0196 3.26998 11.8124 2.95993 11.5512 2.69876C11.2901 2.4376 10.98 2.23043 10.6388 2.08909C10.2976 1.94775 9.93184 1.875 9.5625 1.875H8.625" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                Submit Property
                                            </a>
                                        </div>  
                                    </div>
                                    
                                    <div class="mobile-nav-toggler mobile-button"><span></span></div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Header Lower -->
                
                </header>
                <!-- end header -->
                <!-- sidebar dashboard -->
                <div class="sidebar-menu-dashboard">
                    <a href="index.html" class="logo-box">
                        <img src="{% static 'images/logo/logo-footer%402x.png' %}" alt="">
                    </a>
                    <div class="user-box">
                        <p class="fw-6">Profile</p>
                        <div class="user">  
                            <div class="content">
                                 <div class="caption-2 text">Account</div>
                                 <div class="text-white fw-6" id="display-email">themesflat@gmail...</div>
                            </div>
                        </div>
                    </div>
                    <div class="menu-box">
                        <div class="title fw-6">Menu</div>
                        <ul class="box-menu-dashboard">
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="{% url 'dashboard' %}">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path d="M6.75682 9.35156V15.64" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M11.0342 6.34375V15.6412" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M15.2412 12.6758V15.6412" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2939 1.83398H6.70346C3.70902 1.83398 1.83203 3.95339 1.83203 6.95371V15.0476C1.83203 18.0479 3.70029 20.1673 6.70346 20.1673H15.2939C18.2971 20.1673 20.1654 18.0479 20.1654 15.0476V6.95371C20.1654 3.95339 18.2971 1.83398 15.2939 1.83398Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg> 
                                    Dashboards
                                </a>
                            </li>
                            <li class="nav-menu-item active">
                                <a class="nav-menu-link" href="my-profile.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.987 14.0684C7.44168 14.0684 4.41406 14.6044 4.41406 16.7511C4.41406 18.8979 7.42247 19.4531 10.987 19.4531C14.5323 19.4531 17.5591 18.9162 17.5591 16.7703C17.5591 14.6245 14.5515 14.0684 10.987 14.0684Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9866 11.0056C13.3132 11.0056 15.1989 9.11897 15.1989 6.79238C15.1989 4.46579 13.3132 2.58008 10.9866 2.58008C8.66005 2.58008 6.77346 4.46579 6.77346 6.79238C6.7656 9.11111 8.6391 10.9977 10.957 11.0056H10.9866Z" stroke="#F1FAEE" stroke-width="1.42857" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>
                                    Profile
                                </a>
                            </li>
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="reviews.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                            <path d="M16.4076 8.11328L12.3346 11.4252C11.5651 12.0357 10.4824 12.0357 9.71285 11.4252L5.60547 8.11328" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.4985 19.25C18.2864 19.2577 20.1654 16.9671 20.1654 14.1518V7.85584C20.1654 5.04059 18.2864 2.75 15.4985 2.75H6.49891C3.711 2.75 1.83203 5.04059 1.83203 7.85584V14.1518C1.83203 16.9671 3.711 19.2577 6.49891 19.25H15.4985Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>   
                                    Reviews
                                </a>
                            </li>
                            <!-- <li class="nav-menu-item">
                                <a class="nav-menu-link" href="message.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M17.4808 17.4814C14.6793 20.2831 10.531 20.8885 7.13625 19.3185C6.6351 19.1167 6.22423 18.9537 5.83362 18.9537C4.74565 18.9601 3.39143 20.015 2.68761 19.3121C1.98379 18.6082 3.03952 17.2529 3.03952 16.1583C3.03952 15.7677 2.88291 15.3641 2.68116 14.862C1.11046 11.4678 1.71663 7.31811 4.5181 4.51726C8.09433 0.939714 13.9045 0.939714 17.4808 4.51634C21.0635 8.09941 21.057 13.9047 17.4808 17.4814Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M14.6105 11.3802H14.6187" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M10.9347 11.3802H10.9429" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M7.2589 11.3802H7.26715" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>  
                                    Message
                                </a>
                            </li> -->
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="my-property.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path d="M10.533 2.55664H7.10561C4.28686 2.55664 2.51953 4.55222 2.51953 7.37739V14.9986C2.51953 17.8237 4.27861 19.8193 7.10561 19.8193H15.1943C18.0222 19.8193 19.7813 17.8237 19.7813 14.9986V11.3062" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.09012 10.0111L14.9404 3.16086C15.7938 2.30836 17.177 2.30836 18.0305 3.16086L19.146 4.27644C19.9995 5.12986 19.9995 6.51403 19.146 7.36653L12.2628 14.2498C11.8897 14.6229 11.3837 14.8328 10.8557 14.8328H7.42188L7.50804 11.3678C7.52087 10.8581 7.72896 10.3723 8.09012 10.0111Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M13.8984 4.21875L18.0839 8.40425" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>   
                                    My properties
                                </a>
                            </li>
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="my-favorites.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M2.63385 10.6318C1.65026 7.56096 2.79976 4.05104 6.02368 3.01246C7.71951 2.46521 9.59135 2.78788 11.0012 3.84846C12.3349 2.81721 14.2755 2.46888 15.9695 3.01246C19.1934 4.05104 20.3503 7.56096 19.3676 10.6318C17.8368 15.4993 11.0012 19.2485 11.0012 19.2485C11.0012 19.2485 4.21601 15.5561 2.63385 10.6318Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M14.668 6.14258C15.6488 6.45974 16.3418 7.33516 16.4252 8.36274" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>
                                    My favorite
                                </a>
                            </li>
                            <!-- <li class="nav-menu-item">
                                <a class="nav-menu-link" href="save-search.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <circle cx="10.7864" cy="10.7864" r="8.23951" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M16.5156 16.9453L19.746 20.1673" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>
                                    Save search
                                </a>
                            </li> -->
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="message.html">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M17.4808 17.4814C14.6793 20.2831 10.531 20.8885 7.13625 19.3185C6.6351 19.1167 6.22423 18.9537 5.83362 18.9537C4.74565 18.9601 3.39143 20.015 2.68761 19.3121C1.98379 18.6082 3.03952 17.2529 3.03952 16.1583C3.03952 15.7677 2.88291 15.3641 2.68116 14.862C1.11046 11.4678 1.71663 7.31811 4.5181 4.51726C8.09433 0.939714 13.9045 0.939714 17.4808 4.51634C21.0635 8.09941 21.057 13.9047 17.4808 17.4814Z" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M14.6105 11.3802H14.6187" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M10.9347 11.3802H10.9429" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M7.2589 11.3802H7.26715" stroke="#F1FAEE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>  
                                    Message
                                </a>
                            </li>
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="add-property.html">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                            <path d="M19.5 3H4.5C4.10218 3 3.72064 3.15804 3.43934 3.43934C3.15804 3.72064 3 4.10218 3 4.5V19.5C3 19.8978 3.15804 20.2794 3.43934 20.5607C3.72064 20.842 4.10218 21 4.5 21H19.5C19.8978 21 20.2794 20.842 20.5607 20.5607C20.842 20.2794 21 19.8978 21 19.5V4.5C21 4.10218 20.842 3.72064 20.5607 3.43934C20.2794 3.15804 19.8978 3 19.5 3ZM19.5 19.5H4.5V4.5H19.5V19.5ZM16.5 12C16.5 12.1989 16.421 12.3897 16.2803 12.5303C16.1397 12.671 15.9489 12.75 15.75 12.75H12.75V15.75C12.75 15.9489 12.671 16.1397 12.5303 16.2803C12.3897 16.421 12.1989 16.5 12 16.5C11.8011 16.5 11.6103 16.421 11.4697 16.2803C11.329 16.1397 11.25 15.9489 11.25 15.75V12.75H8.25C8.05109 12.75 7.86032 12.671 7.71967 12.5303C7.57902 12.3897 7.5 12.1989 7.5 12C7.5 11.8011 7.57902 11.6103 7.71967 11.4697C7.86032 11.329 8.05109 11.25 8.25 11.25H11.25V8.25C11.25 8.05109 11.329 7.86032 11.4697 7.71967C11.6103 7.57902 11.8011 7.5 12 7.5C12.1989 7.5 12.3897 7.57902 12.5303 7.71967C12.671 7.86032 12.75 8.05109 12.75 8.25V11.25H15.75C15.9489 11.25 16.1397 11.329 16.2803 11.4697C16.421 11.6103 16.5 11.8011 16.5 12Z" fill="#F1FAEE"></path>
                                        </g>
                                    </svg>
                                         
                                    Add Property
                                </a>
                            </li>
                            <li class="nav-menu-item">
                                <a class="nav-menu-link" href="#" id="logout-link">
                                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g opacity="0.2">
                                        <path d="M13.7627 6.77418V5.91893C13.7627 4.05352 12.2502 2.54102 10.3848 2.54102H5.91606C4.05156 2.54102 2.53906 4.05352 2.53906 5.91893V16.1214C2.53906 17.9868 4.05156 19.4993 5.91606 19.4993H10.394C12.2539 19.4993 13.7627 17.9914 13.7627 16.1315V15.2671" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M19.9907 11.0208H8.95312" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M17.3047 8.34766L19.9887 11.0197L17.3047 13.6927" stroke="#F1FAEE" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </g>
                                    </svg>
                                    Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                </div>
                <!-- end sidebar dashboard -->

                <div class="main-content">
                    <div class="main-content-inner wrap-dashboard-content-2">
                        <div class="button-show-hide show-mb">
                            <span class="body-1">Show Dashboard</span>
                        </div>
                        <div class="widget-box-2">
                            <div class="box">
                                <h5 class="title">Avatar</h5>
                                <div class="box-agent-avt">
                                 <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="box-agent-avt">
        <div class="avatar">
           <img id="avatar-img" 
     src="{% if request.user.profile.avatar %}{{ request.user.profile.avatar.url }}{% else %}{% static 'images/avatar/default.png' %}{% endif %}" 
     alt="avatar" width="128" height="128">

        </div>
        <div class="content uploadfile">
            <p>Upload a new avatar</p>
            <div class="box-ip">
                <input type="file" name="avatar" class="ip-file">
            </div>
            <p>JPEG 100x100</p>
            <button type="submit" class="btn btn-primary mt-2">Save Avatar</button>
        </div>
    </div>
</form>
</div>
</div>
<h5 class="title">Information</h5>
<div class="box box-fieldset">
    <label>Full name:<span>*</span></label>
    <input type="text" id="profile-username-input" value="" class="form-control style-1">
</div>

<!-- Email in input -->
<div class="box grid-4 gap-30 box-info-2"> 
    <div class="box-fieldset">
        <label>Email address:<span>*</span></label>
        <input type="email" id="profile-email-input" value="" class="form-control style-1">
    </div>
</div>
 <h5 class="title">Change password</h5>
     <div class="text-forgot text-end">
          <a href="#modalResetPassword" data-bs-toggle="modal" data-bs-dismiss="modal">Reset password?</a>
     </div>

 <!-- pass reset-->
 <div class="modal modal-account fade" id="modalResetPassword" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="flat-account">
        <div class="banner-account">
          <img src="{% static 'images/banner/banner-account1.jpg' %}" alt="banner">
        </div>
        <form id="requestResetForm" class="form-account">
          <div class="title-box">
            <h4>Reset Password</h4>
            <span class="close-modal icon-close2" data-bs-dismiss="modal"></span>
          </div>
          <div class="box">
            <fieldset class="box-fieldset">
              <label>Email Address</label>
              <div class="ip-field">
                <input type="email" id="resetEmail" class="form-control" placeholder="Enter your email" required>
              </div>
            </fieldset>
          </div>

          <div id="resetError" style="color:red; display:none;"></div>
          <div class="box box-btn">
            <button type="submit" class="tf-btn primary w-100">Send Reset Link</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!--Pass reset confirm-->
<div class="modal modal-account fade" id="modalResetPasswordConfirm">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="flat-account">
          <div class="banner-account">
            <img src="{% static 'images/banner/banner-account1.jpg' %}" alt="banner">
          </div>
          <form id="resetPasswordConfirmForm" class="form-account">
            <div class="title-box">
              <h4>Reset Password</h4>
              <span class="close-modal icon-close2" data-bs-dismiss="modal"></span>
            </div>
            <div class="box">
              <fieldset class="box-fieldset">
                <label>New Password</label>
                <div class="ip-field">
                  <input type="password" name="new_password" class="form-control" placeholder="Enter new password" required>
                </div>
              </fieldset>
              <fieldset class="box-fieldset">
                <label>Confirm Password</label>
                <div class="ip-field">
                  <input type="password" name="confirm_password" class="form-control" placeholder="Confirm new password" required>
                </div>
              </fieldset>
            </div>
            <div id="reset-confirm-error" style="display:none; color:red; margin-top:10px;"></div>
            <div id="reset-confirm-success" style="display:none; color:green; margin-top:10px;"></div>
            <div class="box box-btn">
              <button type="submit" class="tf-btn primary w-100">Reset Password</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
                        </div>
                    </div>
                    <div class="footer-dashboard">
                        <p>Copyright Â© 2024 Home Lengo</p>
                    </div>
                </div>

                <div class="overlay-dashboard"></div>

            </div>
        </div>
        <!-- /#page -->

    </div>
    <!-- go top -->
    <div class="progress-wrap">
        <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" style="transition: stroke-dashoffset 10ms linear 0s; stroke-dasharray: 307.919, 307.919; stroke-dashoffset: 286.138;"></path>
        </svg>
    </div>

<!-- Javascript -->

<script>

//pass rest
document.getElementById('requestResetForm').addEventListener('submit', async function (e) {
  e.preventDefault();

  const email = document.getElementById('resetEmail').value;
  const errorDiv = document.getElementById('resetError');
  errorDiv.style.display = 'none';
  errorDiv.textContent = '';

  try {
    const response = await fetch('http://localhost:8000/api/auth/request-reset-email/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email })
    });

    const data = await response.json();

    if (!response.ok) {
      errorDiv.textContent = data.error || "Something went wrong.";
      errorDiv.style.display = 'block';
    } else {
      alert('Password reset link sent. Check your email.');
      document.getElementById('requestResetForm').reset();
      var modalEl = bootstrap.Modal.getInstance(document.getElementById('modalResetPassword'));
      modalEl.hide(); // Hide modal on success
    }
  } catch (err) {
    errorDiv.textContent = "Network error. Please try again.";
    errorDiv.style.display = 'block';
  }
});


  document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const uid = urlParams.get("uid");
    const token = urlParams.get("token");

    if (uid && token) {
      const modal = new bootstrap.Modal(document.getElementById("modalResetPasswordConfirm"));
      modal.show();

      const form = document.getElementById("resetPasswordConfirmForm");
      const errorDiv = document.getElementById("reset-confirm-error");
      const successDiv = document.getElementById("reset-confirm-success");

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        errorDiv.style.display = "none";
        successDiv.style.display = "none";

        const new_password = form.querySelector('input[name="new_password"]').value;
        const confirm_password = form.querySelector('input[name="confirm_password"]').value;

        if (new_password !== confirm_password) {
          errorDiv.textContent = "Passwords do not match.";
          errorDiv.style.display = "block";
          return;
        }

        try {
          const response = await fetch("/api/auth/password-reset-complete/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ uid, token, new_password }),
          });

          const data = await response.json();

          if (!response.ok) {
            errorDiv.textContent = data.error || "Reset failed.";
            errorDiv.style.display = "block";
          } else {
            successDiv.textContent = "Password reset successful. You can now log in.";
            successDiv.style.display = "block";
            form.reset();
          }
        } catch (err) {
          errorDiv.textContent = "Network error. Please try again.";
          errorDiv.style.display = "block";
        }
      });
    }
  });


//pass rest confirm
document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const uid = urlParams.get("uid");
    const token = urlParams.get("token");

    if (uid && token) {
      const modal = new bootstrap.Modal(document.getElementById("modalResetPasswordConfirm"));
      modal.show();

      const form = document.getElementById("resetPasswordConfirmForm");
      const errorDiv = document.getElementById("reset-confirm-error");
      const successDiv = document.getElementById("reset-confirm-success");

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        errorDiv.style.display = "none";
        successDiv.style.display = "none";

        const new_password = form.querySelector('input[name="new_password"]').value;
        const confirm_password = form.querySelector('input[name="confirm_password"]').value;

        if (new_password !== confirm_password) {
          errorDiv.textContent = "Passwords do not match.";
          errorDiv.style.display = "block";
          return;
        }

        try {
          const response = await fetch("/api/auth/password-reset-complete/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ uid, token, new_password }),
          });

          const data = await response.json();

          if (!response.ok) {
            errorDiv.textContent = data.error || "Reset failed.";
            errorDiv.style.display = "block";
          } else {
            successDiv.textContent = "Password reset successful. You can now log in.";
            successDiv.style.display = "block";
            form.reset();
          }
        } catch (err) {
          errorDiv.textContent = "Network error. Please try again.";
          errorDiv.style.display = "block";
        }
      });
    }
  });


//profile
document.addEventListener("DOMContentLoaded", function() {
    const username = localStorage.getItem('userName');
    const email = localStorage.getItem('userEmail');

    if (username && email) {
        // Fill input fields
        const usernameInput = document.getElementById('profile-username-input');
        const emailInput = document.getElementById('profile-email-input');
        if (usernameInput) usernameInput.value = username;
        if (emailInput) emailInput.value = email;

        // Fill display elements
        const usernameDisplay = document.getElementById('display-username');
        const emailDisplay = document.getElementById('display-email');
        if (usernameDisplay) usernameDisplay.textContent = username;
        if (emailDisplay) emailDisplay.textContent = email;
    }
});

//logout 
document.body.addEventListener('click', function(e) {
  if (e.target && e.target.id === 'logout-link') {
    e.preventDefault();
    alert("Logout clicked!");
document.body.addEventListener('click', async function(e) {
  if (e.target && e.target.id === 'logout-link') {
    e.preventDefault();

    // Get refresh token before clearing storage
    const refreshToken = localStorage.getItem('refresh_token');

    if (refreshToken) {
      try {
        const response = await fetch('/api/auth/logout/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ refresh: refreshToken }),
          signal: AbortSignal.timeout(2000) // optional timeout
        });

        if (!response.ok) {
          console.warn('Logout API responded with status:', response.status);
        } else {
          console.log('Logout API success');
        }
      } catch (error) {
        console.warn('Logout API error:', error);
      }
    }

    // Clear localStorage regardless of fetch result
    localStorage.clear();

    // Redirect to home page
    window.location.href = '/';
  }
});

}
});

</script>
    
    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/plugin.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jqueryui.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.nice-select.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/shortcodes.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/main.js' %}"></script>
</body>


<!-- Mirrored from homelengohtml.vercel.app/my-profile.html by  /3.x [XR&CO'2014], Mon, 14 Apr 2025 00:46:12 GMT -->
</html>
{%endblock%}
